{
	"info": {
		"_postman_id": "ecf6b7cb-378c-478f-9695-a5d21fbc08b6",
		"name": "Server-to-Server with Web SDK",
		"description": "SafeCharge offers a server-to-server integration to accept payments. This section describes the step-by-step flow of the best way to perform a server to server integration with SafeCharge, including using our Web SDK authenticate3d method to first perform a 3D Secure only validation.\r\n\r\n",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Init Postman",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "51033058-e2b1-431e-bfb7-14daca7637a7",
						"exec": [
							"postman.setGlobalVariable(\"Petka\", function Petka() {",
							"",
							"    let petka = {};",
							"",
							"    Date.prototype.timestamp = function () {",
							"        var yy = this.getFullYear();",
							"        var mm = (\"0\" + (this.getMonth() + 1)).toString().slice(-2); // getMonth() is zero-based",
							"        var dd = (\"0\" + this.getDate()).toString().slice(-2);",
							"        var hh = (\"0\" + this.getHours()).toString().slice(-2);",
							"        var MM = (\"0\" + this.getMinutes()).toString().slice(-2);",
							"",
							"        var ss = (\"0\" + this.getSeconds()).toString().slice(-2);",
							"        return yy + mm + dd + hh + MM + ss;",
							"    };",
							"",
							"    petka.getTimeStamp = function getTimeStamp() {",
							"        return new Date().timestamp();",
							"    };",
							"",
							"    petka.getClientUniqueId = function getClientUniqueId(request) {",
							"        var json = JSON.parse(request.data);",
							"        return json.clientRequestId !== undefined && json.clientRequestId !== \"{{clientRequestId}}\" ? json.clientRequestId : new Date().timestamp();",
							"    };",
							"",
							"    petka.getCalculatedChecksum = function getCalculatedChecksum(request, checkSumKeys) {",
							"        var json = JSON.parse(request.data);",
							"        var merchantKey = postman.getEnvironmentVariable('merchantKey');",
							"",
							"        var str = \"\";",
							"        checkSumKeys.forEach(function (entry) {",
							"            var element = petka.getJsonElement(json, entry);",
							"            if (element !== undefined) {",
							"                var match = element.toString().match(/{{(.*)}}/);",
							"                str += (match !== null ? postman.getEnvironmentVariable(match[1]) : element.toString());",
							"            }",
							"        });",
							"        str += merchantKey;",
							"        // Use the CryptoJS",
							"        var hash; // this variable is for debuging purposes",
							"        if (postman.getEnvironmentVariable('useSha256') === \"true\") {",
							"            hash = CryptoJS.SHA256(str).toString();",
							"        } else {",
							"            hash = CryptoJS.MD5(str).toString();",
							"        }",
							"        return hash;",
							"    };",
							"",
							"    petka.getJsonElement = function getJsonElement(json, entry) {",
							"        var value = json;",
							"        _.each(entry.split('.'), function (v) {",
							"            if (value[v] !== undefined) {",
							"                value = value[v];",
							"            } else {",
							"                value = undefined;",
							"                return;",
							"            }",
							"        });",
							"",
							"        return value;",
							"    };",
							"    // https://github.com/postmanlabs/postman-app-support/issues/882",
							"    petka.tests = function tests() {",
							"        var helpers = {};",
							"        helpers.responseCode = function (tests, responseCode) {",
							"            tests[\"Returned  response code is \\\"\" + responseCode + \"\\\"\"] = responseCode === 200;",
							"            return tests;",
							"",
							"        };",
							"        helpers.status = function (tests, json) {",
							"            tests[\"Returned status is \\\"\" + json.status + \"\\\"\"] = json.status == \"SUCCESS\";",
							"            return tests;",
							"        };",
							"        helpers.version = function (tests, json) {",
							"            tests[\"Returned version is \\\"\" + json.version + \"\\\"\"] = json.version === \"1.0\";",
							"            return tests;",
							"        };",
							"        helpers.sessionToken = function (tests, json) {",
							"            tests[\"Returned sessionToken is \\\"\" + json.sessionToken + \"\\\"\"] = json.sessionToken !== undefined;",
							"            return tests;",
							"        };",
							"        helpers.schema = function (tests, json, schema) {",
							"            result = tv4.validate(json, schemas[schema]);",
							"            tests[\"Returned schema validation is \\\"\" + tv4.error + \"\\\"\"] =",
							"                result;",
							"            return tests;",
							"        };",
							"",
							"        return helpers;",
							"    }();",
							"",
							"    var schemas = {",
							"        \"getSessionToken\": {",
							"            \"$schema\": \"http://json-schema.org/draft-04/schema#\",",
							"            \"title\": \"getSessionToken\",",
							"            \"description\": \"getSessionToken json schema\",",
							"            \"type\": \"object\",",
							"            \"additionalProperties\": false,",
							"            \"properties\": {",
							"                \"sessionToken\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"internalRequestId\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"status\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"errCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"reason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantSiteId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"version\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"clientRequestId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"            },",
							"            \"required\": [\"sessionToken\", \"internalRequestId\", \"status\", \"errCode\", \"reason\", \"merchantId\", \"merchantSiteId\", \"version\", \"clientRequestId\"]",
							"        },",
							"        \"cardTokenization\": {",
							"            \"$schema\": \"http://json-schema.org/draft-04/schema#\",",
							"            \"title\": \"cardTokenization\",",
							"            \"description\": \"cardTokenization json schema\",",
							"            \"type\": \"object\",",
							"            \"additionalProperties\": false,",
							"            \"properties\": {",
							"                \"sessionToken\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"internalRequestId\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"status\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"errCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"reason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"version\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"ccTempToken\": {",
							"                    \"type\": \"string\"",
							"                },",
							"            },",
							"            \"required\": [\"sessionToken\", \"internalRequestId\", \"status\", \"errCode\", \"reason\", \"version\", \"ccTempToken\"]",
							"        },",
							"        \"paymentCC\": {",
							"            \"$schema\": \"http://json-schema.org/draft-04/schema#\",",
							"            \"title\": \"paymentCC\",",
							"            \"description\": \"paymentCC json schema\",",
							"            \"type\": \"object\",",
							"            \"additionalProperties\": false,",
							"            \"properties\": {",
							"                \"sessionToken\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"orderId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantSiteId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"userTokenId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"clientUniqueId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"clientRequestId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"internalRequestId\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"status\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"transactionStatus\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"errCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"reason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"gwErrorCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"gwErrorReason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"gwExtendedErrorCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"version\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"userPaymentOptionId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"externalTransactionId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"transactionId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"authCode\": {",
							"                    \"type\": \"string\"",
							"                },",
							"",
							"                \"externalToken\": {",
							"                    \"additionalProperties\": false,",
							"                    \"type\": \"object\",",
							"                    \"properties\": {",
							"                        \"externalToken_blockedCard\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_cardAcquirerId\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_cardAcquirerName\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_cardBin\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_cardBrandId\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_cardBrandName\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_cardExpiration\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_cardLength\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_cardMask\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_cardName\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_cardTypeId\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_cardTypeName\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_clubName\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_creditCompanyId\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_creditCompanyName\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_extendedCardType\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_Indication\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_tokenValue\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"externalToken_tokenProvider\": {",
							"                            \"type\": \"string\"",
							"                        }",
							"                    },",
							"                    \"required\": [\"externalToken_blockedCard\", \"externalToken_cardAcquirerId\", \"externalToken_cardAcquirerName\", \"externalToken_cardBin\", \"externalToken_cardBrandId\", \"externalToken_cardBrandName\", \"externalToken_cardExpiration\", \"externalToken_cardLength\", \"externalToken_cardMask\", \"externalToken_cardName\", \"externalToken_cardTypeId\", \"externalToken_cardTypeName\", \"externalToken_clubName\", \"externalToken_creditCompanyId\", \"externalToken_creditCompanyName\", \"externalToken_extendedCardType\", \"externalToken_Indication\", \"externalToken_tokenValue\", \"externalToken_tokenProvider\"]",
							"                },",
							"",
							"                \"partialApprovalDetails\": {",
							"                    \"additionalProperties\": false,",
							"                    \"type\": \"object\",",
							"                    \"properties\": {",
							"                        \"isPartialApproval\": {",
							"                            \"type\": \"string\"",
							"                        },",
							"                        \"amountInfo\": {",
							"                            \"additionalProperties\": false,",
							"                            \"type\": \"object\",",
							"                            \"properties\": {",
							"                                \"requestedAmount\": {",
							"                                    \"type\": \"string\"",
							"                                },",
							"                                \"requestedCurrency\": {",
							"                                    \"type\": \"string\"",
							"                                },",
							"                                \"processedAmount\": {",
							"                                    \"type\": \"string\"",
							"                                },",
							"                                \"processedCurrency\": {",
							"                                    \"type\": \"string\"",
							"                                }",
							"                            },",
							"                            \"required\": [\"requestedAmount\", \"requestedCurrency\", \"processedAmount\", \"processedCurrency\"]",
							"                        }",
							"",
							"                    },",
							"                    \"required\": [\"isPartialApproval\", \"amountInfo\"]",
							"                }",
							"",
							"            },",
							"            \"required\": [\"orderId\", \"transactionStatus\", \"gwErrorCode\", \"gwExtendedErrorCode\", \"userPaymentOptionId\", \"transactionId\", \"authCode\", \"sessionToken\", \"clientUniqueId\", \"internalRequestId\", \"status\", \"errCode\", \"reason\", \"merchantId\", \"merchantSiteId\", \"version\", \"clientRequestId\"]",
							"        },",
							"        \"settleTransaction\": {",
							"            \"$schema\": \"http://json-schema.org/draft-04/schema#\",",
							"            \"title\": \"settleTransaction\",",
							"            \"description\": \"settleTransaction json schema\",",
							"            \"type\": \"object\",",
							"            \"additionalProperties\": false,",
							"            \"properties\": {",
							"                \"merchantId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantSiteId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"internalRequestId\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"clientUniqueId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"clientRequestId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"transactionId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"externalTransactionId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"status\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"transactionStatus\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"authCode\": {",
							"                    \"type\": \"string\"",
							"                },",
							"",
							"                \"errCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"reason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"paymentMethodErrorCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"paymentMethodErrorReason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"gwErrorCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"gwErrorReason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"gwExtendedErrorCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"",
							"                \"version\": {",
							"                    \"type\": \"string\"",
							"                },",
							"            },",
							"            \"required\": [\"transactionId\", \"gwErrorCode\", \"gwExtendedErrorCode\", \"transactionStatus\", \"authCode\", \"clientUniqueId\", \"internalRequestId\", \"status\", \"errCode\", \"reason\", \"merchantId\", \"merchantSiteId\", \"version\", \"clientRequestId\"]",
							"        },",
							"        \"refundTransaction\": {",
							"            \"$schema\": \"http://json-schema.org/draft-04/schema#\",",
							"            \"title\": \"refundTransaction\",",
							"            \"description\": \"refundTransaction json schema\",",
							"            \"type\": \"object\",",
							"            \"additionalProperties\": false,",
							"            \"properties\": {",
							"                \"merchantId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantSiteId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"internalRequestId\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"clientUniqueId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"clientRequestId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"transactionId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"externalTransactionId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"status\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"transactionStatus\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"authCode\": {",
							"                    \"type\": \"string\"",
							"                },",
							"",
							"                \"errCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"reason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"paymentMethodErrorCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"paymentMethodErrorReason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"gwErrorCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"gwErrorReason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"gwExtendedErrorCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"",
							"                \"version\": {",
							"                    \"type\": \"string\"",
							"                },",
							"            },",
							"            \"required\": [\"transactionId\", \"gwErrorCode\", \"gwExtendedErrorCode\", \"transactionStatus\", \"authCode\", \"clientUniqueId\", \"internalRequestId\", \"status\", \"errCode\", \"reason\", \"merchantId\", \"merchantSiteId\", \"version\", \"clientRequestId\"]",
							"        },",
							"        \"voidTransaction\": {",
							"            \"$schema\": \"http://json-schema.org/draft-04/schema#\",",
							"            \"title\": \"voidTransaction\",",
							"            \"description\": \"voidTransaction json schema\",",
							"            \"type\": \"object\",",
							"            \"additionalProperties\": false,",
							"            \"properties\": {",
							"                \"merchantId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantSiteId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"internalRequestId\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"clientUniqueId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"clientRequestId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"transactionId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"externalTransactionId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"status\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"transactionStatus\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"authCode\": {",
							"                    \"type\": \"string\"",
							"                },",
							"",
							"                \"errCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"reason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"paymentMethodErrorCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"paymentMethodErrorReason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"gwErrorCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"gwErrorReason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"gwExtendedErrorCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"",
							"                \"version\": {",
							"                    \"type\": \"string\"",
							"                },",
							"            },",
							"            \"required\": [\"transactionId\", \"gwErrorCode\", \"gwExtendedErrorCode\", \"transactionStatus\", \"authCode\", \"clientUniqueId\", \"internalRequestId\", \"status\", \"errCode\", \"reason\", \"merchantId\", \"merchantSiteId\", \"version\", \"clientRequestId\"]",
							"        },",
							"        \"getSubscriptions\": {",
							"            \"$schema\": \"http://json-schema.org/draft-04/schema#\",",
							"            \"title\": \"getSubscriptions\",",
							"            \"description\": \"getSubscriptions json schema\",",
							"            \"type\": \"object\",",
							"            \"additionalProperties\": false,",
							"            \"properties\": {",
							"                \"subscriptions\": {",
							"                    \"type\": \"array\",",
							"                    \"items\": {",
							"                        \"additionalProperties\": false,",
							"                        \"type\": \"object\",",
							"                        \"properties\": {",
							"                            \"subscriptionId\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"productId\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"productName\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"recurringAmount\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"initialAmount\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"currency\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"userTokenId\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"userPaymentOptionId\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"cardType\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"cardNumber\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"cardHolderName\": {",
							"                                \"type\": \"string\"",
							"                            }",
							"                        },",
							"                        \"required\": [\"subscriptionId\",",
							"                            \"productId\",",
							"                            \"productName\",",
							"                            \"recurringAmount\",",
							"                            \"initialAmount\",",
							"                            \"currency\",",
							"                            \"userTokenId\",",
							"                            \"userPaymentOptionId\",",
							"                            \"cardType\",",
							"                            \"cardNumber\",",
							"                            \"cardHolderName\"",
							"                        ]",
							"                    }",
							"                },",
							"                \"internalRequestId\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"status\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"errCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"reason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantSiteId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"version\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"clientRequestId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"",
							"            },",
							"            \"required\": [\"subscriptions\",",
							"                \"internalRequestId\",",
							"                \"status\",",
							"                \"errCode\",",
							"                \"reason\",",
							"                \"merchantId\",",
							"                \"merchantSiteId\",",
							"                \"version\",",
							"                \"clientRequestId\"",
							"            ]",
							"        },",
							"        \"getSubscriptionsList\": {",
							"            \"$schema\": \"http://json-schema.org/draft-04/schema#\",",
							"            \"title\": \"getSubscriptionsList\",",
							"            \"description\": \"getSubscriptionsList json schema\",",
							"            \"id\": \"http://example.com/example.json\",",
							"            \"properties\": {",
							"                \"clientRequestId\": {",
							"                    \"id\": \"/properties/clientRequestId\",",
							"                    \"type\": \"string\"",
							"                },",
							"                \"errCode\": {",
							"                    \"id\": \"/properties/errCode\",",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"internalRequestId\": {",
							"                    \"id\": \"/properties/internalRequestId\",",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"merchantId\": {",
							"                    \"id\": \"/properties/merchantId\",",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantSiteId\": {",
							"                    \"id\": \"/properties/merchantSiteId\",",
							"                    \"type\": \"string\"",
							"                },",
							"                \"reason\": {",
							"                    \"id\": \"/properties/reason\",",
							"                    \"type\": \"string\"",
							"                },",
							"                \"status\": {",
							"                    \"id\": \"/properties/status\",",
							"                    \"type\": \"string\"",
							"                },",
							"                \"subscriptionsList\": {",
							"                    \"additionalItems\": false,",
							"                    \"id\": \"/properties/subscriptionsList\",",
							"                    \"items\": {",
							"                        \"id\": \"/properties/subscriptionsList/items\",",
							"                        \"properties\": {",
							"                            \"subscriptionCreateDate\": {",
							"                                \"id\": \"/properties/subscriptionsList/items/properties/subscriptionCreateDate\",",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"subscriptionId\": {",
							"                                \"id\": \"/properties/subscriptionsList/items/properties/subscriptionId\",",
							"                                \"type\": \"integer\"",
							"                            },",
							"                            \"subscriptionPlanId\": {",
							"                                \"id\": \"/properties/subscriptionsList/items/properties/subscriptionPlanId\",",
							"                                \"type\": \"integer\"",
							"                            },",
							"                            \"subscriptionStatus\": {",
							"                                \"id\": \"/properties/subscriptionsList/items/properties/subscriptionStatus\",",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"userPaymentOption\": {",
							"                                \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption\",",
							"                                \"properties\": {",
							"                                    \"billingAddress\": {",
							"                                        \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/billingAddress\",",
							"                                        \"properties\": {},",
							"                                        \"type\": \"object\"",
							"                                    },",
							"                                    \"expiryDate\": {",
							"                                        \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/expiryDate\",",
							"                                        \"type\": \"string\"",
							"                                    },",
							"                                    \"paymentMethodName\": {",
							"                                        \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/paymentMethodName\",",
							"                                        \"type\": \"string\"",
							"                                    },",
							"                                    \"upoData\": {",
							"                                        \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/upoData\",",
							"                                        \"properties\": {",
							"                                            \"bin\": {",
							"                                                \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/upoData/properties/bin\",",
							"                                                \"type\": \"string\"",
							"                                            },",
							"                                            \"brand\": {",
							"                                                \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/upoData/properties/brand\",",
							"                                                \"type\": \"string\"",
							"                                            },",
							"                                            \"cardType\": {",
							"                                                \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/upoData/properties/cardType\",",
							"                                                \"type\": \"string\"",
							"                                            },",
							"                                            \"ccCardNumber\": {",
							"                                                \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/upoData/properties/ccCardNumber\",",
							"                                                \"type\": \"string\"",
							"                                            },",
							"                                            \"ccExpMonth\": {",
							"                                                \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/upoData/properties/ccExpMonth\",",
							"                                                \"type\": \"string\"",
							"                                            },",
							"                                            \"ccExpYear\": {",
							"                                                \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/upoData/properties/ccExpYear\",",
							"                                                \"type\": \"string\"",
							"                                            },",
							"                                            \"ccNameOnCard\": {",
							"                                                \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/upoData/properties/ccNameOnCard\",",
							"                                                \"type\": \"string\"",
							"                                            },",
							"                                            \"uniqueCC\": {",
							"                                                \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/upoData/properties/uniqueCC\",",
							"                                                \"type\": \"string\"",
							"                                            }",
							"                                        },",
							"                                        \"required\": [",
							"                                            \"bin\",",
							"                                            \"ccExpMonth\",",
							"                                            \"brand\",",
							"                                            \"uniqueCC\",",
							"                                            \"cardType\",",
							"                                            \"ccCardNumber\",",
							"                                            \"ccExpYear\",",
							"                                            \"ccNameOnCard\"",
							"                                        ],",
							"                                        \"type\": \"object\"",
							"                                    },",
							"                                    \"upoName\": {",
							"                                        \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/upoName\",",
							"                                        \"type\": \"string\"",
							"                                    },",
							"                                    \"upoStatus\": {",
							"                                        \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/upoStatus\",",
							"                                        \"type\": \"string\"",
							"                                    },",
							"                                    \"userPaymentOptionId\": {",
							"                                        \"id\": \"/properties/subscriptionsList/items/properties/userPaymentOption/properties/userPaymentOptionId\",",
							"                                        \"type\": \"integer\"",
							"                                    }",
							"                                },",
							"                                \"required\": [",
							"                                    \"upoStatus\",",
							"                                    \"upoData\",",
							"                                    \"userPaymentOptionId\",",
							"                                    \"expiryDate\",",
							"                                    \"upoName\",",
							"                                    \"billingAddress\",",
							"                                    \"paymentMethodName\"",
							"                                ],",
							"                                \"type\": \"object\"",
							"                            },",
							"                            \"userTokenId\": {",
							"                                \"id\": \"/properties/subscriptionsList/items/properties/userTokenId\",",
							"                                \"type\": \"string\"",
							"                            }",
							"                        },",
							"                        \"required\": [",
							"                            \"subscriptionCreateDate\",",
							"                            \"userTokenId\",",
							"                            \"subscriptionStatus\",",
							"                            \"userPaymentOption\",",
							"                            \"subscriptionId\",",
							"                            \"subscriptionPlanId\"",
							"                        ],",
							"                        \"type\": \"object\"",
							"                    },",
							"                    \"type\": \"array\",",
							"                    \"uniqueItems\": true",
							"                },",
							"                \"totalCount\": {",
							"                    \"id\": \"/properties/totalCount\",",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"version\": {",
							"                    \"id\": \"/properties/version\",",
							"                    \"type\": \"string\"",
							"                }",
							"            },",
							"            \"required\": [",
							"                \"status\",",
							"                \"clientRequestId\",",
							"                \"internalRequestId\",",
							"                \"errCode\",",
							"                \"subscriptionsList\",",
							"                \"totalCount\",",
							"                \"reason\",",
							"                \"version\",",
							"                \"merchantSiteId\",",
							"                \"merchantId\"",
							"            ],",
							"            \"type\": \"object\"",
							"        },",
							"        \"getSubscriptionPlans\": {",
							"            \"$schema\": \"http://json-schema.org/draft-04/schema#\",",
							"            \"title\": \"getSubscriptionPlans\",",
							"            \"description\": \"getSubscriptionPlans json schema\",",
							"            \"type\": \"object\",",
							"            \"additionalProperties\": false,",
							"            \"properties\": {",
							"                \"clientRequestId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"errCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"internalRequestId\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"merchantId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantSiteId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"reason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"status\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"subscriptionPlans\": {",
							"                    \"additionalItems\": false,",
							"                    \"items\": {",
							"                        \"properties\": {",
							"                            \"subscriptionPlanId\": {",
							"                                \"type\": \"integer\"",
							"                            },",
							"                            \"productName\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"currency\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"initialAmount\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"rebillAmount\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"startUnit\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"startUnitValue\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"recurrungUnit\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"recurringUnitValue\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"endUnit\": {",
							"                                \"type\": \"string\"",
							"                            },",
							"                            \"endUnitValue\": {",
							"                                \"type\": \"string\"",
							"                            }",
							"                        },",
							"                        \"required\": [",
							"                            \"subscriptionPlanId\",",
							"                            \"productName\",",
							"                            \"currency\",",
							"                            \"initialAmount\",",
							"                            \"rebillAmount\",",
							"                            \"startUnit\",",
							"                            \"startUnitValue\",",
							"                            \"recurrungUnit\",",
							"                            \"recurringUnitValue\",",
							"                            \"endUnit\",",
							"                            \"endUnitValue\"",
							"                        ],",
							"                        \"type\": \"object\"",
							"                    },",
							"                    \"type\": \"array\",",
							"                    \"uniqueItems\": true",
							"                },",
							"                \"version\": {",
							"                    \"type\": \"string\"",
							"                }",
							"            },",
							"            \"required\": [",
							"                \"status\",",
							"                \"clientRequestId\",",
							"                \"internalRequestId\",",
							"                \"errCode\",",
							"                \"subscriptionPlans\",",
							"                \"reason\",",
							"                \"version\",",
							"                \"merchantId\"",
							"            ],",
							"        },",
							"        \"cancelSubscription\": {",
							"            \"$schema\": \"http://json-schema.org/draft-04/schema#\",",
							"            \"title\": \"cancelSubscription\",",
							"            \"description\": \"cancelSubscription json schema\",",
							"            \"type\": \"object\",",
							"            \"additionalProperties\": false,",
							"            \"properties\": {",
							"                \"internalRequestId\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"status\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"errCode\": {",
							"                    \"type\": \"integer\"",
							"                },",
							"                \"reason\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"merchantSiteId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"version\": {",
							"                    \"type\": \"string\"",
							"                },",
							"                \"clientRequestId\": {",
							"                    \"type\": \"string\"",
							"                },",
							"",
							"            },",
							"            \"required\": [\"internalRequestId\",",
							"                \"status\",",
							"                \"errCode\",",
							"                \"reason\",",
							"                \"merchantId\",",
							"                \"merchantSiteId\",",
							"                \"version\",",
							"                \"clientRequestId\"",
							"            ]",
							"        }",
							"    };",
							"",
							"    //return this;",
							"    return petka;",
							"} + '; Petka();');"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://safecharge.com",
					"protocol": "http",
					"host": [
						"safecharge",
						"com"
					]
				},
				"description": "run this script once, the \"pre-req.\" script will prepare all the necessary calculation, such as the checksum"
			},
			"response": []
		},
		{
			"name": "/openOrder (before createPayment)",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "f42702f0-f4a6-44ca-92ff-d49da9dbb97b",
						"exec": [
							"var Petka = eval(globals.Petka);\r",
							"\r",
							"postman.setEnvironmentVariable('timestamp', Petka.getTimeStamp());\r",
							"\r",
							"postman.setEnvironmentVariable('clientRequestId', Petka.getClientUniqueId(request));\r",
							"\r",
							"// Checksum must be calculated at the end.\r",
							"postman.setEnvironmentVariable('checksum', Petka.getCalculatedChecksum(request,[\"merchantId\",\"merchantSiteId\",\"clientRequestId\",\"amount\",\"currency\",\"timeStamp\"]));\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "d5b14ebc-19de-4e54-8c99-b3ba5ecc751c",
						"exec": [
							"var json = JSON.parse(responseBody);",
							"postman.setEnvironmentVariable(\"sessionToken\", json.sessionToken);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"merchantSiteId\": \"{{merchantSiteId}}\",\n    \"merchantId\": \"{{merchantId}}\",\n    \"clientRequestId\": \"{{clientRequestId}}\",\n    \"timeStamp\": \"{{timestamp}}\",\n    \"checksum\": \"{{checksum}}\",\n    \"amount\": \"10\",\n    \"currency\": \"EUR\"    ,\n      \"billingAddress\": {\n        \"email\": \"someone@somedomain.com\",\n        \"county\": \"GB\"\n      }\n      \n}"
				},
				"url": {
					"raw": "{{url}}/ppp/api/openOrder.do",
					"host": [
						"{{url}}"
					],
					"path": [
						"ppp",
						"api",
						"openOrder.do"
					]
				},
				"description": "This API retrieves the sessionToken you require for the Web SDK functions.\r\n- Make sure to set you merchantId, merchantSiteId and secret in the environment variables\r\n- you can view the checksum calculation in the \"pre-req.\" tab. in case you get an \"invalid checksum\" response - make sure your secret key is set correctly with the environment variables\r\n- compy the sessionToken from the response and place it in your Web SDK code."
			},
			"response": []
		},
		{
			"name": "/payment  WITH liability-shift",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "25d339a8-61c4-4557-9575-9d9af4dea192",
						"exec": [
							"var Petka = eval(globals.Petka);\r",
							"\r",
							"postman.setEnvironmentVariable('amount', '10');\r",
							"\r",
							"postman.setEnvironmentVariable('timestamp', Petka.getTimeStamp());\r",
							"\r",
							"postman.setEnvironmentVariable('clientRequestId', Petka.getClientUniqueId(request));\r",
							"\r",
							"// Checksum must be calculated at the end.\r",
							"postman.setEnvironmentVariable('checksum', Petka.getCalculatedChecksum(request,[\"merchantId\",\"merchantSiteId\",\"clientRequestId\",\"amount\", \"currency\",\"timeStamp\"]));"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "bce0f68a-37c2-4894-b898-b30396a599d0",
						"exec": [
							"var json = JSON.parse(responseBody);",
							"postman.setEnvironmentVariable(\"relatedTransactionId\", json.transactionId);",
							"postman.setEnvironmentVariable(\"authCode\", json.authCode);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"sessionToken\": \"{{sessionToken}}\",\n    \"merchantId\": \"{{merchantId}}\",\n    \"merchantSiteId\": \"{{merchantSiteId}}\",\n    \"clientRequestId\": \"{{clientRequestId}}\",\n    \"timeStamp\": \"{{timestamp}}\",\n    \"checksum\": \"{{checksum}}\",\n    \"relatedTransactionId\": \"{{paymentTransactionId}}\",\n    \"currency\": \"{{currency}}\",\n    \"amount\": \"<same as in authenticate3d>\",\n    \"userTokenId\": \"someone@site.com\",\n    \"paymentOption\": {\n        \"userPaymentOptionId\": \"<as recieved from authenticate3d>\",\n        \"card\": {\n            \"threeD\": {\n                \"externalMpi\": {\n                    \"eci\": \"2\",\n                    \"threeDProtocolVersion\": \"<as recieved from authenticate3d>\",\n                    \"cavv\": \"<as recieved from authenticate3d>=\",\n                    \"dsTransID\": \"<as recieved from authenticate3d>\"\n                }\n            }\n        }\n    },\n    \"billingAddress\": {\n        \"firstName\": \"John\",\n        \"lastName\": \"Smith\",\n        \"address\": \"340689 main St.\",\n        \"city\": \"London\",\n        \"country\": \"GB\",\n        \"email\": \"john.smith@safecharge.com\"\n    },\n    \"deviceDetails\": {\n        \"ipAddress\": \"93.146.254.172\"\n    }\n}"
				},
				"url": {
					"raw": "{{url}}/ppp/api/payment.do",
					"host": [
						"{{url}}"
					],
					"path": [
						"ppp",
						"api",
						"payment.do"
					]
				},
				"description": "The call to authenticate3d() in the previous step returns the 3D Secure authentication output, and when authentication is successful you will receive:\r\n\r\neci equals either 5 or 2\r\nThe cavv value  the encrypted authentication value to pass on with the payment.\r\nYou can then proceed to perform a liability shift payment by calling the /payment API method, using the 3D Secure authentication fields as received from authenticate3d():\r\n\r\n* cavv\r\n* eci\r\n* dsTransID (needed and retrieved only in case of 3Dv2)\r\nThese are placed under the externalMpi block under the threeD block, as illustrated in the sample below"
			},
			"response": []
		},
		{
			"name": "/payment WITHOUT liability shift",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "1bb711a5-627e-4c8f-880a-4cbe77e3f039",
						"exec": [
							"var Petka = eval(globals.Petka);\r",
							"\r",
							"postman.setEnvironmentVariable('amount', '10');\r",
							"\r",
							"postman.setEnvironmentVariable('timestamp', Petka.getTimeStamp());\r",
							"\r",
							"postman.setEnvironmentVariable('clientRequestId', Petka.getClientUniqueId(request));\r",
							"\r",
							"// Checksum must be calculated at the end.\r",
							"postman.setEnvironmentVariable('checksum', Petka.getCalculatedChecksum(request,[\"merchantId\",\"merchantSiteId\",\"clientRequestId\",\"amount\", \"currency\",\"timeStamp\"]));"
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "ad814c2c-cc5f-4c23-b6e6-0e236dac396d",
						"exec": [
							"var json = JSON.parse(responseBody);",
							"postman.setEnvironmentVariable(\"paymentTransactionId\", json.transactionId);",
							"postman.setEnvironmentVariable(\"paymentAuthCode\", json.authCode);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"type": "text",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n   \"sessionToken\": \"{{sessionToken}}\",\r\n   \"merchantId\": \"{{merchantId}}\",\r\n   \"merchantSiteId\": \"{{merchantSiteId}}\",\r\n   \"clientRequestId\": \"{{clientRequestId}}\",\r\n   \"timeStamp\": \"{{timestamp}}\",\r\n   \"checksum\": \"{{checksum}}\",\r\n   \"currency\": \"{{currency}}\",\r\n   \"amount\": \"<same as in authenticate3d>\",\r\n   \"userTokenId\": \"someone@site.com\",\r\n   \"paymentOption\": {\r\n      \"userPaymentOptionId\": \"<as recieved from authenticate3d>\"\r\n   },\r\n   \"billingAddress\": {\r\n      \"firstName\": \"John\",\r\n      \"lastName\": \"Smith\",\r\n      \"address\": \"340689 main St.\",\r\n      \"city\": \"London\",\r\n      \"country\": \"GB\",\r\n      \"email\": \"john.smith@safecharge.com\"\r\n   },\r\n   \"deviceDetails\": {\r\n      \"ipAddress\": \"93.146.254.172\"\r\n   }\r\n}"
				},
				"url": {
					"raw": "{{url}}/ppp/api/payment.do",
					"host": [
						"{{url}}"
					],
					"path": [
						"ppp",
						"api",
						"payment.do"
					]
				},
				"description": "Use this method to process a regular/non-3D payment. This is in case that the the 3D Secure authenticate failed, and you would like to make the payment, nevertheless and WITHOUT LIABILITY-SHIFT:\r\nwhen authenticate3d() returned eci=7,6,1; cavv is empty or null."
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "cbb78753-3343-4eea-8491-34bd8d136354",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "00029bf7-62e2-4777-9f57-2fbaca264bc3",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"protocolProfileBehavior": {}
}